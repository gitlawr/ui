<section class="box mb-20">
<h4>Edit your CI template</h4>
<div class="row">
  <div class="col span-6">
    {{new-select
      classNames="form-control"
      content=sortedVersions
      prompt="newCatalog.version.prompt"
      localizedPrompt=true
      optionLabelPath="version"
      optionValuePath="link"
      value=selectedTemplateUrl
      disabled=getTemplate.isRunning
    }}
    <p class="text-info">Select a version as the template to upgrade</p>
  </div>
</div>
<div class="pt-10"></div>
<h4>Edit your Template Using CI parameters</h4>
<div class="tabs">
  <ul class="tab-header" role="tablist">
    {{#each selectedModel.filesAry as |file|}}
      <li role="tab" class="{{if (eq previewTab file.name) 'active'}}" {{action "selectPreviewTab" file.name}}><a href="#">base/{{file.name}} {{copy-to-clipboard clipboardText=file.body size="small"}}</a></li>
    {{/each}}
  </ul>

  <div class="tab-content" role="tabpanel">
    {{#each selectedModel.filesAry as |file|}}
      {{#if (eq previewTab file.name)}}
        <div class="">
          {{ivy-codemirror 
            value=file.body
            valueUpdated=(action (mut file.body))
            options=(hash autofocus=true lineNumbers=true 
            mode=(pipeline-file-extension file.name) theme="monokai")
            }}
        </div>
      {{/if}}
    {{/each}}
  </div>
</div>

</section>

<section class="box mb-20">
<div class="pt-10"></div>
<h2>
  <div class="checkbox pt-10">
    <label class="acc-label pb-5">{{input type="checkbox" checked=selectedModel.deploy}} Upgrade to the latest version</label>
  </div>
</h2>
<p class="text-muted mt-0 mb-0">This option will help you upgrade the latest version on it.</p>
{{#if selectedModel.deploy}}
  <div class="pt-10"></div>
  <div class="inline-form">
    <label>Stack Name {{field-required}}</label>
    <div class="pt-10"></div>
    {{input
      class="js-var-hint"
      value=selectedModel.stackName
      placeholder="stack name"
    }}
  </div>

  <div class="pt-10"></div>
  <div class="tabs">
    <ul class="tab-header" role="tablist">
      <li role="tab" class="active"><a href="#">{{t 'newCatalog.txt'}} {{copy-to-clipboard clipboardText=selectedModel.answerString size="small"}}</a></li>
    </ul>
    <div class="tab-content" role="tabpanel">
      {{ivy-codemirror 
        value=selectedModel.answerString
        valueUpdated=(action (mut selectedModel.answerString))
        options=(hash autofocus=true lineNumbers=true mode="text" theme="monokai")}}
    </div>
  </div>

  {{pipeline/pipeline-step-env-setting
    model = selectedModel
  }}
{{/if}}
</section>
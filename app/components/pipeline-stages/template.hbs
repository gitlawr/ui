<section class="pipeline-stages">
  <div class="stages-line"></div>
  {{#if stagesDraggable}}
    {{#sortable-objects useSwap=true sortableObjectList=model sortEndAction='sortEndAction' class="stage-wrap" enableSort=true sortingScope="sortingGroup"}}
      {{#each model as |item index|}}
        {{#draggable-object isDraggable=true dragHandle='.js-dragHandle' class="stage-wrap" content=item overrideClass='sortObject' isSortable=true sortingScope="sortingGroup"}}
            <div class="stage-name text-muted">
              {{index-add index}}. {{item.name}}
            </div>
            {{pipeline-steps model=item.steps stageId=item.name stpesDraggable=false editable=editable stagesDraggable=stagesDraggable}}
        {{/draggable-object}}
      {{/each}}
    {{/sortable-objects}}
    <div class="stage-wrap">
      <div class="stage-name text-muted">
        {{t 'pipelinesPage.newStage'}}
      </div>
      <div class="pipeline-steps">
        <div class="steps-line"></div>
        <div class="steps-head-dot"></div>
        <div class="steps-wrap">
          <div class="step-content big" {{action 'addStage'}}>
            {{t 'pipelinesPage.addStage'}}
          </div>
        </div>
      </div>
    </div>
  {{else}}
    {{#each model as |item index|}}
    <div class="stage-wrap">
      <div class="stage-name">
        {{index-add index}}. {{item.name}}
      </div>
      {{pipeline-steps model=item.steps stageId=item.name stpesDraggable=false stagesDraggable=stagesDraggable editable=editable}}
    </div>
    {{/each}}
  {{/if}}
</section>


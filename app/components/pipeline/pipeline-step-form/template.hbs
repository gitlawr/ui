<div class="inline-form">
  <label>{{t 'newPipelineStep.jobType.label'}}</label>
  <div class="pt-10"></div>
  <div>
  {{new-select
    content=stepsTypeChoices
    optionLabelPath="id"
    optionValuePath="id"
    value=type
    disabled=(if (eq modalOpts.type 'review') true false)
  }}
  </div>
</div>

{{#if (eq type 'scm')}}
  {{pipeline/step-scm
    selectedModel=selectedModel
    modalOpts=modalOpts
  }}
{{/if}}

{{#if (eq type 'build')}}
  {{pipeline/step-build
    selectedModel=selectedModel
    modalOpts=modalOpts
  }}
{{/if}}

{{#if (eq type 'task')}}
  {{pipeline/pipeline-step-task
    pipeline=pipeline
    selectedModel=selectedModel
    modalOpts=modalOpts
  }}
{{/if}}

{{#if (eq type 'upgradeService')}}
  {{pipeline/pipeline-step-service
    pipeline=pipeline
    selectedModel=selectedModel
    modalOpts=modalOpts
  }}
{{/if}}

{{#if (eq type 'upgradeStack')}}
  {{pipeline/pipeline-step-stack
    pipeline=pipeline
    selectedModel=selectedModel
    modalOpts=modalOpts
  }}
{{/if}}

{{#if (eq type 'upgradeCatalog')}}
  {{pipeline/pipeline-step-catalog
    pipeline=pipeline
    selectedModel=selectedModel
    editing=editing
    modalOpts=modalOpts
  }}
{{/if}}

{{#if (not-eq type 'scm')}}
<div class="pt-20"></div>
<label>Timeout</label>
<div class="pt-10"></div>
<div class="input-group">
  {{input-number min='3' classNames="form-control" value=selectedModel.timeout}}    
  <span class="input-group-addon bg-default">minutes</span>
</div>
<p class="text-info text small mt-0 mb-0">If a step does not complete by the specified amount of time (in minutes; at least 3), then the build will be terminated automatically and marked as Abort.</p>
{{/if}}

{{#if (not-eq type 'scm')}}
<div class="pt-20"></div>
<div class="inline-form">
  <label>{{check-box class="form-control" checked=selectedModel.expressions disabled=(if (eq modalOpts.type 'review') true)}}
    Conditions 
  </label>
  <div class="pt-10"></div>
  {{#if selectedModel.expressions}}
    {{pipeline/pipeline-expressions
      model=selectedModel
      editing=(if (not-eq modalOpts.type 'review') true false)
    }}
  {{/if}}
</div>
{{/if}}
